{"ast":null,"code":"var _jsxFileName = \"/home/lorene/Trybe/MeusProjetosPessoais/store/src/pages/DetailedProduct.js\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport CartButton from '../components/CartButton';\nimport PreviousReviews from '../components/PreviousReviews';\nimport { getProductsID } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass DetailedProduct extends React.Component {\n  constructor() {\n    super();\n\n    this.getProductAvaliation = id => {\n      const userAvaliationList = JSON.parse(localStorage.getItem('userAvaliationList'));\n      const objProductID = userAvaliationList.find(avaliationObj => avaliationObj.id === id);\n\n      if (objProductID) {\n        this.setState({\n          listProductID: objProductID.avaliation\n        });\n      }\n    };\n\n    this.onSubmitSearch = async id => {\n      const productData = await getProductsID(id);\n      this.setState({\n        productData,\n        arrayAttributes: productData.attributes\n      });\n    };\n\n    this.handleClick = product => {\n      const cart = JSON.parse(localStorage.getItem('cartTrybe'));\n      console.log(product);\n\n      if (cart.some(cartItem => cartItem.product.id === product.id)) {\n        cart.forEach((cartItem, index) => {\n          if (cartItem.product.id === product.id) {\n            cart[index].quantity += 1;\n          }\n        });\n      } else {\n        cart.push({\n          product,\n          quantity: 1\n        });\n      }\n\n      localStorage.setItem('cartTrybe', JSON.stringify(cart));\n      this.cartQuantityChange();\n    };\n\n    this.handleChange = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: [value]\n      });\n    };\n\n    this.onClickForm = () => {\n      const {\n        match: {\n          params: {\n            id\n          }\n        }\n      } = this.props;\n      const {\n        email,\n        textarea,\n        stars\n      } = this.state;\n      const userAvaliationList = JSON.parse(localStorage.getItem('userAvaliationList'));\n      const objAvaliation = {\n        email,\n        textarea,\n        stars\n      };\n      const objDoLocalstorage = {\n        id,\n        avaliation: [objAvaliation]\n      };\n\n      if (!userAvaliationList) {\n        userAvaliationList.push(objDoLocalstorage);\n      } else if (userAvaliationList.some(avaliation => avaliation.id === id)) {\n        userAvaliationList.forEach((avaliationObj, index) => {\n          if (avaliationObj.id === id) {\n            userAvaliationList[index].avaliation.push(objAvaliation);\n          }\n        });\n      } else {\n        userAvaliationList.push(objDoLocalstorage);\n      }\n\n      localStorage.setItem('userAvaliationList', JSON.stringify(userAvaliationList));\n      this.getProductAvaliation(id);\n      this.setState({\n        email: '',\n        textarea: '',\n        stars: 0\n      });\n    };\n\n    const cartItems = JSON.parse(localStorage.getItem('cartTrybe'));\n    this.state = {\n      productData: {},\n      arrayAttributes: [],\n      email: '',\n      textarea: '',\n      stars: 0,\n      listProductID: [],\n      cartQuantity: cartItems.reduce((sum, _ref2) => {\n        let {\n          quantity\n        } = _ref2;\n        return sum + quantity;\n      }, 0)\n    };\n    this.cartQuantityChange = this.cartQuantityChange.bind(this);\n  }\n\n  componentDidMount() {\n    const {\n      match: {\n        params: {\n          id\n        }\n      }\n    } = this.props;\n    this.onSubmitSearch(id);\n    this.getProductAvaliation(id);\n  }\n\n  cartQuantityChange() {\n    this.setState(_ref3 => {\n      let {\n        cartQuantity: oldCartQuantity\n      } = _ref3;\n      return {\n        cartQuantity: oldCartQuantity + 1\n      };\n    });\n  }\n\n  render() {\n    const {\n      productData,\n      arrayAttributes,\n      email,\n      textarea,\n      listProductID,\n      cartQuantity\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Especifica\\xE7\\xF5es T\\xE9cnicas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CartButton, {\n        cartQuantity: cartQuantity\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        \"data-testid\": \"product-detail-name\",\n        children: productData.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: productData.thumbnail,\n        width: \"300\",\n        alt: productData.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"R$:\", productData.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"especificacoes\",\n        children: arrayAttributes.map((atribute, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [atribute.name, \":\", atribute.value_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        \"data-testid\": \"product-detail-add-to-cart\",\n        onClick: () => this.handleClick(productData),\n        id: productData.id,\n        children: \"Adicionar ao Carrinho\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"product-detail-email\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Email\",\n            \"data-testid\": \"product-detail-email\",\n            value: email,\n            name: \"email\",\n            type: \"text\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"star-rating__stars\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"1-rating\",\n            className: \"star-rating__label\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"star-rating__input\",\n              type: \"radio\",\n              name: \"stars\",\n              value: 1,\n              \"data-testid\": \"1-rating\",\n              id: \"1-rating\",\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"2-rating\",\n            className: \"star-rating__label\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"star-rating__input\",\n              type: \"radio\",\n              name: \"stars\",\n              value: 2,\n              \"data-testid\": \"2-rating\",\n              id: \"2-rating\",\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"3-rating\",\n            className: \"star-rating__label\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"star-rating__input\",\n              type: \"radio\",\n              name: \"stars\",\n              value: 3,\n              \"data-testid\": \"3-rating\",\n              id: \"3-rating\",\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"4-rating\",\n            className: \"star-rating__label\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"star-rating__input\",\n              type: \"radio\",\n              name: \"stars\",\n              value: 4,\n              \"data-testid\": \"4-rating\",\n              id: \"4-rating\",\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"5-rating\",\n            className: \"star-rating__label\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"star-rating__input\",\n              type: \"radio\",\n              name: \"stars\",\n              value: 5,\n              \"data-testid\": \"5-rating\",\n              id: \"5-rating\",\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          placeholder: \"Mensagem (opcional)\",\n          \"data-testid\": \"product-detail-evaluation\",\n          name: \"textarea\",\n          value: textarea,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          \"data-testid\": \"submit-review-btn\",\n          type: \"button\",\n          disabled: this.validateForm,\n          onClick: this.onClickForm,\n          children: \"Avaliar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PreviousReviews, {\n        list: listProductID\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nDetailedProduct.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    })\n  }).isRequired\n};\nexport default DetailedProduct;","map":{"version":3,"sources":["/home/lorene/Trybe/MeusProjetosPessoais/store/src/pages/DetailedProduct.js"],"names":["PropTypes","React","CartButton","PreviousReviews","getProductsID","DetailedProduct","Component","constructor","getProductAvaliation","id","userAvaliationList","JSON","parse","localStorage","getItem","objProductID","find","avaliationObj","setState","listProductID","avaliation","onSubmitSearch","productData","arrayAttributes","attributes","handleClick","product","cart","console","log","some","cartItem","forEach","index","quantity","push","setItem","stringify","cartQuantityChange","handleChange","target","name","value","onClickForm","match","params","props","email","textarea","stars","state","objAvaliation","objDoLocalstorage","cartItems","cartQuantity","reduce","sum","bind","componentDidMount","oldCartQuantity","render","title","thumbnail","price","map","atribute","value_name","validateForm","propTypes","shape","string","isRequired"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport CartButton from '../components/CartButton';\nimport PreviousReviews from '../components/PreviousReviews';\nimport { getProductsID } from '../services/api';\n\nclass DetailedProduct extends React.Component {\n  constructor() {\n    super();\n    const cartItems = JSON.parse(localStorage.getItem('cartTrybe'));\n    this.state = {\n      productData: {},\n      arrayAttributes: [],\n      email: '',\n      textarea: '',\n      stars: 0,\n      listProductID: [],\n      cartQuantity: cartItems.reduce((sum, { quantity }) => sum + quantity, 0),\n    };\n\n    this.cartQuantityChange = this.cartQuantityChange.bind(this);\n  }\n\n  componentDidMount() {\n    const { match: { params: { id } } } = this.props;\n    this.onSubmitSearch(id);\n    this.getProductAvaliation(id);\n  }\n\n  getProductAvaliation = (id) => {\n    const userAvaliationList = JSON.parse(localStorage.getItem('userAvaliationList'));\n    const objProductID = userAvaliationList.find(\n      (avaliationObj) => (avaliationObj.id === id),\n    );\n    if (objProductID) {\n      this.setState({\n        listProductID: objProductID.avaliation,\n      });\n    }\n  }\n\n  onSubmitSearch = async (id) => {\n    const productData = await getProductsID(id);\n    this.setState({ productData, arrayAttributes: productData.attributes });\n  };\n\n  handleClick = (product) => {\n    const cart = JSON.parse(localStorage.getItem('cartTrybe'));\n    console.log(product);\n    if (cart.some((cartItem) => cartItem.product.id === product.id)) {\n      cart.forEach((cartItem, index) => {\n        if (cartItem.product.id === product.id) {\n          cart[index].quantity += 1;\n        }\n      });\n    } else {\n      cart.push({ product, quantity: 1 });\n    }\n    localStorage.setItem('cartTrybe', JSON.stringify(cart));\n    this.cartQuantityChange();\n  };\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({ [name]: [value] });\n  }\n\n  onClickForm = () => {\n    const { match: { params: { id } } } = this.props;\n    const { email, textarea, stars } = this.state;\n    const userAvaliationList = JSON.parse(localStorage.getItem('userAvaliationList'));\n    const objAvaliation = { email, textarea, stars };\n    const objDoLocalstorage = { id, avaliation: [objAvaliation] };\n    if (!userAvaliationList) {\n      userAvaliationList.push(objDoLocalstorage);\n    } else if (userAvaliationList.some((avaliation) => (\n      avaliation.id === id\n    ))) {\n      userAvaliationList.forEach((avaliationObj, index) => {\n        if (avaliationObj.id === id) {\n          userAvaliationList[index].avaliation.push(objAvaliation);\n        }\n      });\n    } else {\n      userAvaliationList.push(objDoLocalstorage);\n    }\n    localStorage.setItem('userAvaliationList', JSON.stringify(userAvaliationList));\n    this.getProductAvaliation(id);\n    this.setState({ email: '', textarea: '', stars: 0 });\n  }\n\n  cartQuantityChange() {\n    this.setState(({ cartQuantity: oldCartQuantity }) => ({\n      cartQuantity: oldCartQuantity + 1,\n    }));\n  }\n\n  render() {\n    const { productData, arrayAttributes, email,\n      textarea, listProductID, cartQuantity } = this.state;\n    return (\n      <div>\n        <h1>Especificações Técnicas</h1>\n        <CartButton cartQuantity={ cartQuantity } />\n        <h3 data-testid=\"product-detail-name\">{ productData.title }</h3>\n        <img\n          src={ productData.thumbnail }\n          width=\"300\"\n          alt={ productData.id }\n        />\n        <h2>\n          R$:\n          { productData.price }\n        </h2>\n        <div className=\"especificacoes\">\n          { arrayAttributes.map((atribute, index) => (\n            <div key={ index }>\n              <span>\n                { atribute.name }\n                :\n                { atribute.value_name }\n              </span>\n            </div>\n          ))}\n        </div>\n        <button\n          type=\"button\"\n          data-testid=\"product-detail-add-to-cart\"\n          onClick={ () => this.handleClick(productData) }\n          id={ productData.id }\n        >\n          Adicionar ao Carrinho\n        </button>\n        <form>\n          <label\n            htmlFor=\"product-detail-email\"\n          >\n            <input\n              placeholder=\"Email\"\n              data-testid=\"product-detail-email\"\n              value={ email }\n              name=\"email\"\n              type=\"text\"\n              onChange={ this.handleChange }\n            />\n          </label>\n          <div className=\"star-rating__stars\">\n            <label\n              htmlFor=\"1-rating\"\n              className=\"star-rating__label\"\n            >\n              <input\n                className=\"star-rating__input\"\n                type=\"radio\"\n                name=\"stars\"\n                value={ 1 }\n                data-testid=\"1-rating\"\n                id=\"1-rating\"\n                onChange={ this.handleChange }\n              />\n            </label>\n            <label\n              htmlFor=\"2-rating\"\n              className=\"star-rating__label\"\n            >\n              <input\n                className=\"star-rating__input\"\n                type=\"radio\"\n                name=\"stars\"\n                value={ 2 }\n                data-testid=\"2-rating\"\n                id=\"2-rating\"\n                onChange={ this.handleChange }\n              />\n            </label>\n            <label\n              htmlFor=\"3-rating\"\n              className=\"star-rating__label\"\n            >\n              <input\n                className=\"star-rating__input\"\n                type=\"radio\"\n                name=\"stars\"\n                value={ 3 }\n                data-testid=\"3-rating\"\n                id=\"3-rating\"\n                onChange={ this.handleChange }\n              />\n            </label>\n            <label\n              htmlFor=\"4-rating\"\n              className=\"star-rating__label\"\n            >\n              <input\n                className=\"star-rating__input\"\n                type=\"radio\"\n                name=\"stars\"\n                value={ 4 }\n                data-testid=\"4-rating\"\n                id=\"4-rating\"\n                onChange={ this.handleChange }\n              />\n            </label>\n            <label\n              htmlFor=\"5-rating\"\n              className=\"star-rating__label\"\n            >\n              <input\n                className=\"star-rating__input\"\n                type=\"radio\"\n                name=\"stars\"\n                value={ 5 }\n                data-testid=\"5-rating\"\n                id=\"5-rating\"\n                onChange={ this.handleChange }\n              />\n            </label>\n          </div>\n          <textarea\n            placeholder=\"Mensagem (opcional)\"\n            data-testid=\"product-detail-evaluation\"\n            name=\"textarea\"\n            value={ textarea }\n            onChange={ this.handleChange }\n          />\n          <button\n            data-testid=\"submit-review-btn\"\n            type=\"button\"\n            disabled={ this.validateForm }\n            onClick={ this.onClickForm }\n          >\n            Avaliar\n          </button>\n        </form>\n        <PreviousReviews list={ listProductID } />\n      </div>\n    );\n  }\n}\n\nDetailedProduct.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n    }),\n  }).isRequired,\n};\n\nexport default DetailedProduct;\n"]},"metadata":{},"sourceType":"module"}