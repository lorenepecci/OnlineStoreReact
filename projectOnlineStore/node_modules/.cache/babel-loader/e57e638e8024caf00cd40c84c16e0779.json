{"ast":null,"code":"var _jsxFileName = \"/home/lorene/Trybe/MeusProjetosPessoais/store/src/pages/DetailedProduct.js\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { Navbar, NavbarBrand, Col, Row } from \"reactstrap\";\nimport CartButton from \"../components/CartButton\";\nimport PreviousReviews from \"../components/PreviousReviews\";\nimport magasin from \"../images/Magasin.png\";\nimport { getProductsID } from \"../services/api\";\n\nclass DetailedProduct extends React.Component {\n  constructor() {\n    super();\n\n    this.getProductAvaliation = id => {\n      const userAvaliationList = JSON.parse(localStorage.getItem(\"userAvaliationList\"));\n      const objProductID = userAvaliationList.find(avaliationObj => avaliationObj.id === id);\n\n      if (objProductID) {\n        this.setState({\n          listProductID: objProductID.avaliation\n        });\n      }\n    };\n\n    this.onSubmitSearch = async id => {\n      const productData = await getProductsID(id);\n      this.setState({\n        productData,\n        arrayAttributes: productData.attributes\n      });\n    };\n\n    this.handleClick = product => {\n      const cart = JSON.parse(localStorage.getItem(\"cartTrybe\"));\n      console.log(product);\n\n      if (cart.some(cartItem => cartItem.product.id === product.id)) {\n        cart.forEach((cartItem, index) => {\n          if (cartItem.product.id === product.id) {\n            cart[index].quantity += 1;\n          }\n        });\n      } else {\n        cart.push({\n          product,\n          quantity: 1\n        });\n      }\n\n      localStorage.setItem(\"cartTrybe\", JSON.stringify(cart));\n      this.cartQuantityChange();\n    };\n\n    this.handleChange = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: [value]\n      });\n    };\n\n    this.onClickForm = () => {\n      const {\n        match: {\n          params: {\n            id\n          }\n        }\n      } = this.props;\n      const {\n        email,\n        textarea,\n        stars\n      } = this.state;\n      const userAvaliationList = JSON.parse(localStorage.getItem(\"userAvaliationList\"));\n      const objAvaliation = {\n        email,\n        textarea,\n        stars\n      };\n      const objDoLocalstorage = {\n        id,\n        avaliation: [objAvaliation]\n      };\n\n      if (!userAvaliationList) {\n        userAvaliationList.push(objDoLocalstorage);\n      } else if (userAvaliationList.some(avaliation => avaliation.id === id)) {\n        userAvaliationList.forEach((avaliationObj, index) => {\n          if (avaliationObj.id === id) {\n            userAvaliationList[index].avaliation.push(objAvaliation);\n          }\n        });\n      } else {\n        userAvaliationList.push(objDoLocalstorage);\n      }\n\n      localStorage.setItem(\"userAvaliationList\", JSON.stringify(userAvaliationList));\n      this.getProductAvaliation(id);\n      this.setState({\n        email: \"\",\n        textarea: \"\",\n        stars: 0\n      });\n    };\n\n    const cartItems = JSON.parse(localStorage.getItem(\"cartTrybe\"));\n    this.state = {\n      productData: {},\n      arrayAttributes: [],\n      email: \"\",\n      textarea: \"\",\n      stars: 0,\n      listProductID: [],\n      cartQuantity: cartItems.reduce((sum, _ref2) => {\n        let {\n          quantity\n        } = _ref2;\n        return sum + quantity;\n      }, 0)\n    };\n    this.cartQuantityChange = this.cartQuantityChange.bind(this);\n  }\n\n  componentDidMount() {\n    const {\n      match: {\n        params: {\n          id\n        }\n      }\n    } = this.props;\n    this.onSubmitSearch(id);\n    this.getProductAvaliation(id);\n  }\n\n  cartQuantityChange() {\n    this.setState(_ref3 => {\n      let {\n        cartQuantity: oldCartQuantity\n      } = _ref3;\n      return {\n        cartQuantity: oldCartQuantity + 1\n      };\n    });\n  }\n\n  render() {\n    const {\n      productData,\n      arrayAttributes,\n      email,\n      textarea,\n      listProductID,\n      cartQuantity\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Navbar, {\n      className: \"navbar\",\n      color: \"white\",\n      expand: \"md\",\n      light: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(NavbarBrand, {\n      className: \"brand\",\n      href: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: magasin,\n      alt: \"magasin-logo\",\n      width: \"200\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(CartButton, {\n      cartQuantity: cartQuantity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"jumbotron jumbotron-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      class: \"display-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }\n    }, \"Especifica\\xE7\\xF5es T\\xE9cnicas \"), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xs: 6,\n      className: \"bg-info border\",\n      sm: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: productData.thumbnail,\n      width: \"300\",\n      alt: productData.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }, \"R$:\", productData.price), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"product-detail-add-to-cart\",\n      onClick: () => this.handleClick(productData),\n      id: productData.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, \"Adicionar ao Carrinho\"))), /*#__PURE__*/React.createElement(Col, {\n      xs: 6,\n      className: \"bg-info border\",\n      sm: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      \"data-testid\": \"product-detail-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }\n    }, productData.title), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"especificacoes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 13\n      }\n    }, arrayAttributes.map((atribute, index) => /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 19\n      }\n    }, atribute.name, \":\", atribute.value_name)))))))), /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"product-detail-email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Email\",\n      \"data-testid\": \"product-detail-email\",\n      value: email,\n      name: \"email\",\n      type: \"text\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"star-rating__stars\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"1-rating\",\n      className: \"star-rating__label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"star-rating__input\",\n      type: \"radio\",\n      name: \"stars\",\n      value: 1,\n      \"data-testid\": \"1-rating\",\n      id: \"1-rating\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"2-rating\",\n      className: \"star-rating__label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"star-rating__input\",\n      type: \"radio\",\n      name: \"stars\",\n      value: 2,\n      \"data-testid\": \"2-rating\",\n      id: \"2-rating\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"3-rating\",\n      className: \"star-rating__label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"star-rating__input\",\n      type: \"radio\",\n      name: \"stars\",\n      value: 3,\n      \"data-testid\": \"3-rating\",\n      id: \"3-rating\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"4-rating\",\n      className: \"star-rating__label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"star-rating__input\",\n      type: \"radio\",\n      name: \"stars\",\n      value: 4,\n      \"data-testid\": \"4-rating\",\n      id: \"4-rating\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"5-rating\",\n      className: \"star-rating__label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"star-rating__input\",\n      type: \"radio\",\n      name: \"stars\",\n      value: 5,\n      \"data-testid\": \"5-rating\",\n      id: \"5-rating\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"textarea\", {\n      placeholder: \"Mensagem (opcional)\",\n      \"data-testid\": \"product-detail-evaluation\",\n      name: \"textarea\",\n      value: textarea,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      \"data-testid\": \"submit-review-btn\",\n      type: \"button\",\n      disabled: this.validateForm,\n      onClick: this.onClickForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }\n    }, \"Avaliar\")), /*#__PURE__*/React.createElement(PreviousReviews, {\n      list: listProductID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nDetailedProduct.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    })\n  }).isRequired\n};\nexport default DetailedProduct;","map":{"version":3,"sources":["/home/lorene/Trybe/MeusProjetosPessoais/store/src/pages/DetailedProduct.js"],"names":["PropTypes","React","Navbar","NavbarBrand","Col","Row","CartButton","PreviousReviews","magasin","getProductsID","DetailedProduct","Component","constructor","getProductAvaliation","id","userAvaliationList","JSON","parse","localStorage","getItem","objProductID","find","avaliationObj","setState","listProductID","avaliation","onSubmitSearch","productData","arrayAttributes","attributes","handleClick","product","cart","console","log","some","cartItem","forEach","index","quantity","push","setItem","stringify","cartQuantityChange","handleChange","target","name","value","onClickForm","match","params","props","email","textarea","stars","state","objAvaliation","objDoLocalstorage","cartItems","cartQuantity","reduce","sum","bind","componentDidMount","oldCartQuantity","render","thumbnail","price","title","map","atribute","value_name","validateForm","propTypes","shape","string","isRequired"],"mappings":"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","sourcesContent":["import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { Navbar, NavbarBrand, Col, Row } from \"reactstrap\";\nimport CartButton from \"../components/CartButton\";\nimport PreviousReviews from \"../components/PreviousReviews\";\nimport magasin from \"../images/Magasin.png\";\nimport { getProductsID } from \"../services/api\";\n\nclass DetailedProduct extends React.Component {\n  constructor() {\n    super();\n    const cartItems = JSON.parse(localStorage.getItem(\"cartTrybe\"));\n    this.state = {\n      productData: {},\n      arrayAttributes: [],\n      email: \"\",\n      textarea: \"\",\n      stars: 0,\n      listProductID: [],\n      cartQuantity: cartItems.reduce((sum, { quantity }) => sum + quantity, 0),\n    };\n\n    this.cartQuantityChange = this.cartQuantityChange.bind(this);\n  }\n\n  componentDidMount() {\n    const {\n      match: {\n        params: { id },\n      },\n    } = this.props;\n    this.onSubmitSearch(id);\n    this.getProductAvaliation(id);\n  }\n\n  getProductAvaliation = (id) => {\n    const userAvaliationList = JSON.parse(\n      localStorage.getItem(\"userAvaliationList\")\n    );\n    const objProductID = userAvaliationList.find(\n      (avaliationObj) => avaliationObj.id === id\n    );\n    if (objProductID) {\n      this.setState({\n        listProductID: objProductID.avaliation,\n      });\n    }\n  };\n\n  onSubmitSearch = async (id) => {\n    const productData = await getProductsID(id);\n    this.setState({ productData, arrayAttributes: productData.attributes });\n  };\n\n  handleClick = (product) => {\n    const cart = JSON.parse(localStorage.getItem(\"cartTrybe\"));\n    console.log(product);\n    if (cart.some((cartItem) => cartItem.product.id === product.id)) {\n      cart.forEach((cartItem, index) => {\n        if (cartItem.product.id === product.id) {\n          cart[index].quantity += 1;\n        }\n      });\n    } else {\n      cart.push({ product, quantity: 1 });\n    }\n    localStorage.setItem(\"cartTrybe\", JSON.stringify(cart));\n    this.cartQuantityChange();\n  };\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({ [name]: [value] });\n  };\n\n  onClickForm = () => {\n    const {\n      match: {\n        params: { id },\n      },\n    } = this.props;\n    const { email, textarea, stars } = this.state;\n    const userAvaliationList = JSON.parse(\n      localStorage.getItem(\"userAvaliationList\")\n    );\n    const objAvaliation = { email, textarea, stars };\n    const objDoLocalstorage = { id, avaliation: [objAvaliation] };\n    if (!userAvaliationList) {\n      userAvaliationList.push(objDoLocalstorage);\n    } else if (userAvaliationList.some((avaliation) => avaliation.id === id)) {\n      userAvaliationList.forEach((avaliationObj, index) => {\n        if (avaliationObj.id === id) {\n          userAvaliationList[index].avaliation.push(objAvaliation);\n        }\n      });\n    } else {\n      userAvaliationList.push(objDoLocalstorage);\n    }\n    localStorage.setItem(\n      \"userAvaliationList\",\n      JSON.stringify(userAvaliationList)\n    );\n    this.getProductAvaliation(id);\n    this.setState({ email: \"\", textarea: \"\", stars: 0 });\n  };\n\n  cartQuantityChange() {\n    this.setState(({ cartQuantity: oldCartQuantity }) => ({\n      cartQuantity: oldCartQuantity + 1,\n    }));\n  }\n\n  render() {\n    const {\n      productData,\n      arrayAttributes,\n      email,\n      textarea,\n      listProductID,\n      cartQuantity,\n    } = this.state;\n    return (\n      <div>\n        <Navbar className=\"navbar\" color=\"white\" expand=\"md\" light>\n          <NavbarBrand className=\"brand\" href=\"/\">\n            <img src={magasin} alt=\"magasin-logo\" width=\"200\" />\n          </NavbarBrand>\n          <CartButton cartQuantity={cartQuantity} />\n        </Navbar>\n        <div class=\"jumbotron jumbotron-fluid\">\n          <div class=\"container\">\n            <h2 class=\"display-4\">Especificações Técnicas </h2>\n            <Row>\n              <Col xs={ 6 } className=\"bg-info border\" sm=\"6\">\n              <div> \n                <img src={productData.thumbnail} width=\"300\" alt={productData.id} />\n                <h2>\n                  R$:\n                  {productData.price}\n                </h2>\n                <button\n                  type=\"button\"\n                  data-testid=\"product-detail-add-to-cart\"\n                  onClick={() => this.handleClick(productData)}\n                  id={productData.id}\n                >\n                  Adicionar ao Carrinho\n                </button>\n              </div>\n              </Col>\n              <Col xs={6} className=\"bg-info border\" sm=\"6\">\n            <h3 data-testid=\"product-detail-name\">{productData.title}</h3>\n            <div className=\"especificacoes\">\n              {arrayAttributes.map((atribute, index) => (\n                <div key={index}>\n                  <span>\n                    {atribute.name}:{atribute.value_name}\n                  </span>\n                </div>\n              ))}\n              </div>\n              </Col>\n              </Row>\n          </div>\n        </div>\n\n\n\n        <form>\n          <label htmlFor=\"product-detail-email\">\n            <input\n              placeholder=\"Email\"\n              data-testid=\"product-detail-email\"\n              value={email}\n              name=\"email\"\n              type=\"text\"\n              onChange={this.handleChange}\n            />\n          </label>\n          <div className=\"star-rating__stars\">\n            <label htmlFor=\"1-rating\" className=\"star-rating__label\">\n              <input\n                className=\"star-rating__input\"\n                type=\"radio\"\n                name=\"stars\"\n                value={1}\n                data-testid=\"1-rating\"\n                id=\"1-rating\"\n                onChange={this.handleChange}\n              />\n            </label>\n            <label htmlFor=\"2-rating\" className=\"star-rating__label\">\n              <input\n                className=\"star-rating__input\"\n                type=\"radio\"\n                name=\"stars\"\n                value={2}\n                data-testid=\"2-rating\"\n                id=\"2-rating\"\n                onChange={this.handleChange}\n              />\n            </label>\n            <label htmlFor=\"3-rating\" className=\"star-rating__label\">\n              <input\n                className=\"star-rating__input\"\n                type=\"radio\"\n                name=\"stars\"\n                value={3}\n                data-testid=\"3-rating\"\n                id=\"3-rating\"\n                onChange={this.handleChange}\n              />\n            </label>\n            <label htmlFor=\"4-rating\" className=\"star-rating__label\">\n              <input\n                className=\"star-rating__input\"\n                type=\"radio\"\n                name=\"stars\"\n                value={4}\n                data-testid=\"4-rating\"\n                id=\"4-rating\"\n                onChange={this.handleChange}\n              />\n            </label>\n            <label htmlFor=\"5-rating\" className=\"star-rating__label\">\n              <input\n                className=\"star-rating__input\"\n                type=\"radio\"\n                name=\"stars\"\n                value={5}\n                data-testid=\"5-rating\"\n                id=\"5-rating\"\n                onChange={this.handleChange}\n              />\n            </label>\n          </div>\n          <textarea\n            placeholder=\"Mensagem (opcional)\"\n            data-testid=\"product-detail-evaluation\"\n            name=\"textarea\"\n            value={textarea}\n            onChange={this.handleChange}\n          />\n          <button\n            data-testid=\"submit-review-btn\"\n            type=\"button\"\n            disabled={this.validateForm}\n            onClick={this.onClickForm}\n          >\n            Avaliar\n          </button>\n        </form>\n        <PreviousReviews list={listProductID} />\n      </div>\n    );\n  }\n}\n\nDetailedProduct.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n    }),\n  }).isRequired,\n};\n\nexport default DetailedProduct;\n"]},"metadata":{},"sourceType":"module"}