{"ast":null,"code":"var _jsxFileName = \"/home/lorene/Trybe/MeusProjetosPessoais/store/src/pages/Home.js\";\nimport React from 'react';\nimport CartButton from '../components/CartButton';\nimport Categories from '../components/Categories';\nimport ProductCard from '../components/ProductCard';\nimport { getCategories, getProductsFromCategoryAndQuery } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Home extends React.Component {\n  constructor() {\n    super();\n\n    this.onChangeInput = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        value\n      } = target;\n      this.setState({\n        nomeProdutoPesquisado: value\n      });\n    };\n\n    this.onSubmitSearch = async () => {\n      const {\n        selectedCategory,\n        nomeProdutoPesquisado\n      } = this.state;\n      const listaProduto = await getProductsFromCategoryAndQuery(selectedCategory, nomeProdutoPesquisado);\n      this.setState({\n        listaProdutos: listaProduto.results\n      });\n    };\n\n    const cartItems = JSON.parse(localStorage.getItem('cartTrybe'));\n    this.state = {\n      categoriesList: [],\n      selectedCategory: '',\n      loadingCategory: true,\n      nomeProdutoPesquisado: '',\n      listaProdutos: [],\n      cartQuantity: cartItems.reduce((sum, _ref2) => {\n        let {\n          quantity\n        } = _ref2;\n        return sum + quantity;\n      }, 0)\n    };\n    this.onCategoryChange = this.onCategoryChange.bind(this);\n    this.cartQuantityChange = this.cartQuantityChange.bind(this);\n  }\n\n  async componentDidMount() {\n    const categories = await getCategories();\n    this.setState({\n      categoriesList: categories,\n      loadingCategory: false\n    });\n  }\n\n  onCategoryChange(event) {\n    const {\n      nomeProdutoPesquisado\n    } = this.state;\n    const {\n      value\n    } = event.target;\n    this.setState({\n      selectedCategory: value\n    }, async () => {\n      const listaProduto = await getProductsFromCategoryAndQuery(value, nomeProdutoPesquisado);\n      this.setState({\n        listaProdutos: listaProduto.results\n      });\n    });\n  }\n\n  cartQuantityChange() {\n    this.setState(_ref3 => {\n      let {\n        cartQuantity: oldCartQuantity\n      } = _ref3;\n      return {\n        cartQuantity: oldCartQuantity + 1\n      };\n    });\n  }\n\n  render() {\n    const {\n      nomeProdutoPesquisado,\n      listaProdutos,\n      cartQuantity,\n      categoriesList,\n      loadingCategory,\n      selectedCategory\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      children: [/*#__PURE__*/_jsxDEV(CartButton, {\n        cartQuantity: cartQuantity\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"pesquisa\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            \"data-testid\": \"query-input\",\n            type: \"text\",\n            value: nomeProdutoPesquisado,\n            id: \"pesquisa\",\n            onChange: this.onChangeInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: this.onSubmitSearch,\n          \"data-testid\": \"query-button\",\n          children: \"Enter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), loadingCategory ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Carregando...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(Categories, {\n        categoriesList: categoriesList,\n        onChange: this.onCategoryChange,\n        selected: selectedCategory\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this), !listaProdutos.length ? /*#__PURE__*/_jsxDEV(\"h3\", {\n        \"data-testid\": \"home-initial-message\",\n        children: \"Digite algum termo de pesquisa ou escolha uma categoria.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(ProductCard, {\n        listaProdutos: listaProdutos,\n        cartQuantityChange: this.cartQuantityChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/lorene/Trybe/MeusProjetosPessoais/store/src/pages/Home.js"],"names":["React","CartButton","Categories","ProductCard","getCategories","getProductsFromCategoryAndQuery","Home","Component","constructor","onChangeInput","target","value","setState","nomeProdutoPesquisado","onSubmitSearch","selectedCategory","state","listaProduto","listaProdutos","results","cartItems","JSON","parse","localStorage","getItem","categoriesList","loadingCategory","cartQuantity","reduce","sum","quantity","onCategoryChange","bind","cartQuantityChange","componentDidMount","categories","event","oldCartQuantity","render","length"],"mappings":"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","sourcesContent":["import React from 'react';\nimport CartButton from '../components/CartButton';\nimport Categories from '../components/Categories';\nimport ProductCard from '../components/ProductCard';\nimport { getCategories, getProductsFromCategoryAndQuery } from '../services/api';\n\nclass Home extends React.Component {\n  constructor() {\n    super();\n    const cartItems = JSON.parse(localStorage.getItem('cartTrybe'));\n    this.state = {\n      categoriesList: [],\n      selectedCategory: '',\n      loadingCategory: true,\n      nomeProdutoPesquisado: '',\n      listaProdutos: [],\n      cartQuantity: cartItems.reduce((sum, { quantity }) => sum + quantity, 0),\n    };\n\n    this.onCategoryChange = this.onCategoryChange.bind(this);\n    this.cartQuantityChange = this.cartQuantityChange.bind(this);\n  }\n\n  async componentDidMount() {\n    const categories = await getCategories();\n    this.setState({\n      categoriesList: categories,\n      loadingCategory: false,\n    });\n  }\n\n  onChangeInput = ({ target }) => {\n    const { value } = target;\n    this.setState({\n      nomeProdutoPesquisado: value,\n    });\n  }\n\n  onCategoryChange(event) {\n    const { nomeProdutoPesquisado } = this.state;\n    const { value } = event.target;\n    this.setState({\n      selectedCategory: value,\n    }, async () => {\n      const listaProduto = await getProductsFromCategoryAndQuery(value,\n        nomeProdutoPesquisado);\n      this.setState({\n        listaProdutos: listaProduto.results,\n      });\n    });\n  }\n\n  onSubmitSearch = async () => {\n    const { selectedCategory, nomeProdutoPesquisado } = this.state;\n    const listaProduto = await getProductsFromCategoryAndQuery(selectedCategory,\n      nomeProdutoPesquisado);\n    this.setState({\n      listaProdutos: listaProduto.results,\n    });\n  }\n\n  cartQuantityChange() {\n    this.setState(({ cartQuantity: oldCartQuantity }) => ({\n      cartQuantity: oldCartQuantity + 1,\n    }));\n  }\n\n  render() {\n    const { nomeProdutoPesquisado, listaProdutos, cartQuantity,\n      categoriesList, loadingCategory, selectedCategory } = this.state;\n    return (\n      <main>\n        <CartButton cartQuantity={ cartQuantity } />\n        <form>\n          <label htmlFor=\"pesquisa\">\n            <input\n              data-testid=\"query-input\"\n              type=\"text\"\n              value={ nomeProdutoPesquisado }\n              id=\"pesquisa\"\n              onChange={ this.onChangeInput }\n            />\n          </label>\n          <button\n            type=\"button\"\n            onClick={ this.onSubmitSearch }\n            data-testid=\"query-button\"\n          >\n            Enter\n          </button>\n        </form>\n        { loadingCategory\n          ? <p>Carregando...</p>\n          : (\n            <Categories\n              categoriesList={ categoriesList }\n              onChange={ this.onCategoryChange }\n              selected={ selectedCategory }\n            />\n          ) }\n        { (!listaProdutos.length) ? (\n          <h3 data-testid=\"home-initial-message\">\n            Digite algum termo de pesquisa ou escolha uma categoria.\n          </h3>\n        ) : (\n          <ProductCard\n            listaProdutos={ listaProdutos }\n            cartQuantityChange={ this.cartQuantityChange }\n          />\n        ) }\n      </main>\n    );\n  }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}